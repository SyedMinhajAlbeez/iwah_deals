module.exports=[43883,a=>{"use strict";var b=a.i(94177),c=a.i(92967),d=a.i(43664),e=a.i(66874),f=a.i(54325),g=class extends e.Subscribable{#a;#b=void 0;#c;#d;constructor(a,b){super(),this.#a=a,this.setOptions(b),this.bindMethods(),this.#e()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(a){let b=this.options;this.options=this.#a.defaultMutationOptions(a),(0,f.shallowEqualObjects)(this.options,b)||this.#a.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#c,observer:this}),b?.mutationKey&&this.options.mutationKey&&(0,f.hashKey)(b.mutationKey)!==(0,f.hashKey)(this.options.mutationKey)?this.reset():this.#c?.state.status==="pending"&&this.#c.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#c?.removeObserver(this)}onMutationUpdate(a){this.#e(),this.#f(a)}getCurrentResult(){return this.#b}reset(){this.#c?.removeObserver(this),this.#c=void 0,this.#e(),this.#f()}mutate(a,b){return this.#d=b,this.#c?.removeObserver(this),this.#c=this.#a.getMutationCache().build(this.#a,this.options),this.#c.addObserver(this),this.#c.execute(a)}#e(){let a=this.#c?.state??(0,c.getDefaultState)();this.#b={...a,isPending:"pending"===a.status,isSuccess:"success"===a.status,isError:"error"===a.status,isIdle:"idle"===a.status,mutate:this.mutate,reset:this.reset}}#f(a){d.notifyManager.batch(()=>{if(this.#d&&this.hasListeners()){let b=this.#b.variables,c=this.#b.context,d={client:this.#a,meta:this.options.meta,mutationKey:this.options.mutationKey};if(a?.type==="success"){try{this.#d.onSuccess?.(a.data,b,c,d)}catch(a){Promise.reject(a)}try{this.#d.onSettled?.(a.data,null,b,c,d)}catch(a){Promise.reject(a)}}else if(a?.type==="error"){try{this.#d.onError?.(a.error,b,c,d)}catch(a){Promise.reject(a)}try{this.#d.onSettled?.(void 0,a.error,b,c,d)}catch(a){Promise.reject(a)}}}this.listeners.forEach(a=>{a(this.#b)})})}},h=a.i(27749);function i(a,c){let e=(0,h.useQueryClient)(c),[i]=b.useState(()=>new g(e,a));b.useEffect(()=>{i.setOptions(a)},[i,a]);let j=b.useSyncExternalStore(b.useCallback(a=>i.subscribe(d.notifyManager.batchCalls(a)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),k=b.useCallback((a,b)=>{i.mutate(a,b).catch(f.noop)},[i]);if(j.error&&(0,f.shouldThrowError)(i.options.throwOnError,[j.error]))throw j.error;return{...j,mutate:k,mutateAsync:j.mutate}}a.s(["useMutation",()=>i],43883)},91391,a=>{"use strict";var b=a.i(66658),c=a.i(40070),d=a.i(97877);function e({className:a="",title:e,loading:f=!1,disabled:g=!1,type:h,...i}){let j=(0,c.default)("relative flex w-full text-lg cursor-pointer font-outfit font-semibold items-center justify-center bg-blue-600 p-3 tracking-wide text-white","hover:opacity-90","rounded-[100px] md:rounded-xl",{"opacity-50 cursor-wait ":f||g},a);return(0,b.jsx)("button",{"aria-disabled":f||g,"aria-label":e,className:j,disabled:f||g,type:h??"reset",...i,children:(0,b.jsx)("div",{className:"mx-2 flex items-center justify-center gap-2",children:f?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(d.default,{className:"bg-white"}),(0,b.jsx)("span",{children:"loading"})]}):(0,b.jsx)("span",{children:e})})})}a.s(["Button",()=>e])},94757,a=>{"use strict";var b=a.i(66658),c=a.i(94177);let d=c.forwardRef(function({title:a,titleId:b,...d},e){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":b},d),a?c.createElement("title",{id:b},a):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"}))});var e=a.i(40070),f=a.i(34149);let g={sm:"text-sm px-2 py-1",md:"text-base px-3 py-2",lg:"text-lg px-4 py-3"},h={sm:"rounded-sm",md:"rounded-md",lg:"rounded-lg"},i=(0,c.forwardRef)(({className:a,label:c,name:i,errorMsg:j,defaultValue:k,typeName:l="text",placeholder:m,size:n="sm",labelPlacement:o="inside",rounded:p="sm",required:q,showAsterisk:r=!0,...s},t)=>{let u=!!j;return(0,b.jsxs)("div",{className:(0,e.default)("max-w-full mb-2.5",a),children:["inside"!==o&&(0,b.jsxs)("label",{className:(0,e.default)("px-1 mb-1 block font-medium text-black dark:text-white"),htmlFor:i,children:[c," ",r&&(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("input",{ref:t,className:(0,e.default)("w-full !rounded-[0.62rem] border bg-transparent text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:text-white",u?"border-red-500":"border-gray-300 dark:border-gray-500",g[n],h[p],"inside"===o?"placeholder-input-color dark:placeholder-selected-color-dark":""),defaultValue:k,id:i,name:i,placeholder:"inside"===o?c:m,type:l,required:q,...s}),u&&(0,b.jsx)("ul",{className:"absolute -bottom-8 py-2 text-sm text-red-500",children:(0,f.isArray)(j)?j.map((a,c)=>(0,b.jsxs)("li",{className:"flex items-center gap-1",children:[(0,b.jsx)(d,{className:"h-5 w-5"}),a]},c)):(0,b.jsxs)("li",{className:"flex items-center gap-1 text-xs sm:text-sm",children:[(0,b.jsx)(d,{className:"size-[18px]"}),"string"==typeof j?j:JSON.stringify(j)]})})]})]})});i.displayName="InputText",a.s(["default",0,i],94757)},22985,a=>{"use strict";a.i(34149),Array(10).fill(0),a.s(["EMAIL",0,"email","getLocalStorage",0,(a,b=!1)=>{},"setLocalStorage",0,(a,b)=>{}])},49332,a=>{"use strict";var b=a.i(84134),c=a.i(30712),d=a.i(68025),e=a.i(6086),f=a.i(34149),g=a.i(94177),h=a.i(14345);function i(){let a=(0,c.useAppDispatch)(),i=(0,h.getCartToken)(),{data:j,isLoading:k,refetch:l}=(0,b.useQuery)({queryKey:["cart-detail",i],queryFn:()=>(0,d.fetchHandler)({url:"cart-detail",method:"POST",contentType:!0,body:{},headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`}}),enabled:!!i});return(0,g.useEffect)(()=>{let b=j?.data?.createReadCart?.readCart;(0,f.isObject)(b)?a((0,e.addItem)(b)):j&&!k&&console.error("Invalid cart data structure:",j)},[j,k,a]),{getCartDetail:l,isLoading:k}}a.s(["useCartDetail",()=>i])},85370,a=>{"use strict";var b=a.i(66658),c=a.i(40070),d=a.i(24538),e=a.i(57546),f=a.i(72339),g=a.i(91741),h=a.i(7773),i=a.i(91391),j=a.i(64885),k=a.i(94757),l=a.i(74907),m=a.i(43883),n=a.i(30712),o=a.i(68025),p=a.i(6086),q=a.i(14345),r=a.i(53284),s=a.i(22985),t=a.i(51359),u=a.i(49332);function v(){let a=(0,g.useRouter)(),v=(0,n.useAppDispatch)(),{showToast:w}=(0,l.useCustomToast)(),{getCartDetail:x}=(0,u.useCartDetail)(),{mergeCart:y}=function(){let{showToast:a}=(0,l.useCustomToast)(),b=(0,n.useAppDispatch)(),{mutateAsync:c,isPending:d,error:e}=(0,m.useMutation)({mutationFn:({token:a,...b})=>(0,o.fetchHandler)({url:"cart/mergeCart",method:"POST",contentType:!0,body:{...b},headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`}}),onSuccess:a=>{let c=a?.data?.createMergeCart?.mergeCart;if(!c)return;let d=c?.id??null;null!=d&&((a,b,c=30)=>{})(0,String(d)),b((0,p.addItem)(c))},onError:b=>{a(b?.message||"Merge cart failed!","danger")}});return{mergeCart:async(a,b)=>{await c({token:a,cartId:b})},isLoading:d,error:e}}(),{register:z,handleSubmit:A,formState:{errors:B,isSubmitting:C}}=(0,h.useForm)({mode:"onSubmit",reValidateMode:"onChange"}),D=async b=>{try{let c=(0,q.getCookie)(j.GUEST_CART_ID),e=(0,q.getCookie)(j.GUEST_CART_TOKEN),f=await (0,d.signIn)("credentials",{redirect:!1,...b,callbackUrl:"/"});if(!f?.ok)return void w(f?.error||"Invalid login credentials.","warning");w("Welcome! Successfully logged in.","success"),(0,s.setLocalStorage)("email",b?.username);let g=await (0,d.getSession)(),h=g?.user?.accessToken;if(h||console.warn("No API token available in session after login"),g?.user&&v((0,t.setUser)(g.user)),h&&c&&e)try{await y(h,parseInt(c,10)),(0,r.setCookie)(j.GUEST_CART_TOKEN,h),(0,r.setCookie)(j.IS_GUEST,"false"),await x()}catch(a){console.error("mergeCart failed:",a)}else h&&((0,r.setCookie)(j.GUEST_CART_TOKEN,h),(0,r.setCookie)(j.IS_GUEST,"false"));setTimeout(()=>{a.push("/"),a.refresh()},100)}catch(a){console.error(a),w("Something went wrong. Please try again.","danger")}};return(0,b.jsxs)("div",{className:"flex h-[80vh] w-full items-center max-w-screen-2xl mx-auto px-4  xss:px-7.5 justify-between gap-4 lg:my-16 xl:my-28",children:[(0,b.jsxs)("div",{className:"flex w-full max-w-[583px] flex-col gap-y-4 lg:gap-y-12",children:[(0,b.jsxs)("div",{className:"font-outfit",children:[(0,b.jsx)("h2",{className:"py-1 text-2xl font-semibold sm:text-4xl",children:"Sign in to your account"}),(0,b.jsx)("p",{className:"mt-2  text-base md:text-lg font-normal text-black/60 dark:text-neutral-400",children:"If you have an account, sign in with your email address."})]}),(0,b.jsxs)("form",{noValidate:!0,className:"flex flex-col gap-y-4 lg:gap-y-12",onSubmit:A(D),children:[(0,b.jsxs)("div",{className:"flex flex-col gap-y-2.5 lg:gap-4",children:[(0,b.jsx)(k.default,{...z("username",{required:"Email is required",pattern:{value:j.EMAIL_REGEX,message:"Please enter a valid email."}}),errorMsg:B.username?.message?[B.username.message]:void 0,label:"Enter Your Email Address",labelPlacement:"outside",name:"username",placeholder:"Enter your email address",rounded:"md",size:"lg",typeName:"email"}),(0,b.jsx)(k.default,{...z("password",{required:"Password is required",minLength:{value:2,message:"Be at least 2 characters long"},validate:a=>!!/[0-2]/.test(a)||"Contain at least one number."}),errorMsg:B.password?.message?[B.password.message]:void 0,label:"Enter Password",labelPlacement:"outside",name:"password",placeholder:"Enter your password",rounded:"md",size:"lg",typeName:"password"}),(0,b.jsx)(f.default,{className:"text-end text-sm font-medium text-blue-600 underline hover:text-blue-500 underline",href:"/customer/forget-password","aria-label":"Go to forgot password page",children:"Forgot your password ?"})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-2 lg:gap-y-3",children:[(0,b.jsx)(i.Button,{className:"cursor-pointer",disabled:C,loading:C,title:"Sign In",type:"submit"}),(0,b.jsxs)("span",{className:"mx-auto font-outfit sm:mx-0",children:["New customer?"," ",(0,b.jsx)(f.default,{className:"font-medium text-blue-600 hover:text-blue-500 underline",href:"/customer/register","aria-label":"Go to create account page",children:"Create your account"})]})]})]})]}),(0,b.jsx)("div",{className:"relative hidden aspect-[0.9] max-h-[692px] w-full max-w-[790px] sm:block md:aspect-[1.14]",children:(0,b.jsx)(e.default,{fill:!0,priority:!0,alt:"Sign In Image",className:(0,c.default)("relative h-full w-full object-fill","transition duration-300 ease-in-out group-hover:scale-105"),sizes:"(min-width: 768px) 66vw, 100vw",src:j.SIGNIN_IMG})})]})}a.s(["default",()=>v],85370)}];

//# sourceMappingURL=storefront_822c9703._.js.map