(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,85034,e=>{"use strict";var t=e.i(78402),s=e.i(96071),r=e.i(42522),a=e.i(99284),i=e.i(81077),n=class extends a.Subscribable{#e;#t=void 0;#s;#r;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#a()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,i.shallowEqualObjects)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,i.hashKey)(t.mutationKey)!==(0,i.hashKey)(this.options.mutationKey)?this.reset():this.#s?.state.status==="pending"&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(e){this.#a(),this.#i(e)}getCurrentResult(){return this.#t}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#a(),this.#i()}mutate(e,t){return this.#r=t,this.#s?.removeObserver(this),this.#s=this.#e.getMutationCache().build(this.#e,this.options),this.#s.addObserver(this),this.#s.execute(e)}#a(){let e=this.#s?.state??(0,s.getDefaultState)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#i(e){r.notifyManager.batch(()=>{if(this.#r&&this.hasListeners()){let t=this.#t.variables,s=this.#t.context,r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(e?.type==="success"){try{this.#r.onSuccess?.(e.data,t,s,r)}catch(e){Promise.reject(e)}try{this.#r.onSettled?.(e.data,null,t,s,r)}catch(e){Promise.reject(e)}}else if(e?.type==="error"){try{this.#r.onError?.(e.error,t,s,r)}catch(e){Promise.reject(e)}try{this.#r.onSettled?.(void 0,e.error,t,s,r)}catch(e){Promise.reject(e)}}}this.listeners.forEach(e=>{e(this.#t)})})}},o=e.i(21984);function l(e,s){let a=(0,o.useQueryClient)(s),[l]=t.useState(()=>new n(a,e));t.useEffect(()=>{l.setOptions(e)},[l,e]);let u=t.useSyncExternalStore(t.useCallback(e=>l.subscribe(r.notifyManager.batchCalls(e)),[l]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),c=t.useCallback((e,t)=>{l.mutate(e,t).catch(i.noop)},[l]);if(u.error&&(0,i.shouldThrowError)(l.options.throwOnError,[u.error]))throw u.error;return{...u,mutate:c,mutateAsync:u.mutate}}e.s(["useMutation",()=>l],85034)},30443,e=>{"use strict";var t=e.i(8999),s=e.i(88327),r=e.i(79603);function a({className:e="",title:a,loading:i=!1,disabled:n=!1,type:o,...l}){let u=(0,s.default)("relative flex w-full text-lg cursor-pointer font-outfit font-semibold items-center justify-center bg-blue-600 p-3 tracking-wide text-white","hover:opacity-90","rounded-[100px] md:rounded-xl",{"opacity-50 cursor-wait ":i||n},e);return(0,t.jsx)("button",{"aria-disabled":i||n,"aria-label":a,className:u,disabled:i||n,type:o??"reset",...l,children:(0,t.jsx)("div",{className:"mx-2 flex items-center justify-center gap-2",children:i?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.default,{className:"bg-white"}),(0,t.jsx)("span",{children:"loading"})]}):(0,t.jsx)("span",{children:a})})})}e.s(["Button",()=>a])},42559,e=>{"use strict";var t=e.i(8999),s=e.i(78402);let r=s.forwardRef(function({title:e,titleId:t,...r},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"}))});var a=e.i(88327),i=e.i(71613);let n={sm:"text-sm px-2 py-1",md:"text-base px-3 py-2",lg:"text-lg px-4 py-3"},o={sm:"rounded-sm",md:"rounded-md",lg:"rounded-lg"},l=(0,s.forwardRef)(({className:e,label:s,name:l,errorMsg:u,defaultValue:c,typeName:d="text",placeholder:m,size:h="sm",labelPlacement:p="inside",rounded:g="sm",required:f,showAsterisk:x=!0,...y},b)=>{let v=!!u;return(0,t.jsxs)("div",{className:(0,a.default)("max-w-full mb-2.5",e),children:["inside"!==p&&(0,t.jsxs)("label",{className:(0,a.default)("px-1 mb-1 block font-medium text-black dark:text-white"),htmlFor:l,children:[s," ",x&&(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{ref:b,className:(0,a.default)("w-full !rounded-[0.62rem] border bg-transparent text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:text-white",v?"border-red-500":"border-gray-300 dark:border-gray-500",n[h],o[g],"inside"===p?"placeholder-input-color dark:placeholder-selected-color-dark":""),defaultValue:c,id:l,name:l,placeholder:"inside"===p?s:m,type:d,required:f,...y}),v&&(0,t.jsx)("ul",{className:"absolute -bottom-8 py-2 text-sm text-red-500",children:(0,i.isArray)(u)?u.map((e,s)=>(0,t.jsxs)("li",{className:"flex items-center gap-1",children:[(0,t.jsx)(r,{className:"h-5 w-5"}),e]},s)):(0,t.jsxs)("li",{className:"flex items-center gap-1 text-xs sm:text-sm",children:[(0,t.jsx)(r,{className:"size-[18px]"}),"string"==typeof u?u:JSON.stringify(u)]})})]})]})});l.displayName="InputText",e.s(["default",0,l],42559)},99275,e=>{"use strict";var t=e.i(71613);Array(10).fill(0),e.s(["EMAIL",0,"email","getLocalStorage",0,(e,t=!1)=>{try{if(window){let s=localStorage.getItem(e);if(!s||void 0===s)return null;if(t)return JSON.parse(s);return s}}catch(e){return console.error("Error:",e),null}},"setLocalStorage",0,(e,s)=>{((0,t.isArray)(s)||(0,t.isObject)(s))&&(s=JSON.stringify(s)),"string"==typeof s&&localStorage.setItem(e,s)}])},85533,e=>{"use strict";var t=e.i(16220),s=e.i(65594),r=e.i(48970),a=e.i(47124),i=e.i(71613),n=e.i(78402),o=e.i(1746);function l(){let e=(0,s.useAppDispatch)(),l=(0,o.getCartToken)(),{data:u,isLoading:c,refetch:d}=(0,t.useQuery)({queryKey:["cart-detail",l],queryFn:()=>(0,r.fetchHandler)({url:"cart-detail",method:"POST",contentType:!0,body:{},headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`}}),enabled:!!l});return(0,n.useEffect)(()=>{let t=u?.data?.createReadCart?.readCart;(0,i.isObject)(t)?e((0,a.addItem)(t)):u&&!c&&console.error("Invalid cart data structure:",u)},[u,c,e]),{getCartDetail:d,isLoading:c}}e.s(["useCartDetail",()=>l])},25855,e=>{"use strict";var t=e.i(8999),s=e.i(88327),r=e.i(89656),a=e.i(70998),i=e.i(52250),n=e.i(5438),o=e.i(60501),l=e.i(30443),u=e.i(29722),c=e.i(42559),d=e.i(91822),m=e.i(85034),h=e.i(65594),p=e.i(48970),g=e.i(47124),f=e.i(1746),x=e.i(3508),y=e.i(99275),b=e.i(42550),v=e.i(85533);function w(){let e=(0,n.useRouter)(),w=(0,h.useAppDispatch)(),{showToast:j}=(0,d.useCustomToast)(),{getCartDetail:C}=(0,v.useCartDetail)(),{mergeCart:S}=function(){let{showToast:e}=(0,d.useCustomToast)(),t=(0,h.useAppDispatch)(),{mutateAsync:s,isPending:r,error:a}=(0,m.useMutation)({mutationFn:({token:e,...t})=>(0,p.fetchHandler)({url:"cart/mergeCart",method:"POST",contentType:!0,body:{...t},headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}}),onSuccess:e=>{let s=e?.data?.createMergeCart?.mergeCart;if(!s)return;let r=s?.id??null;null!=r&&((e,t,s=30)=>{if(!e)return;let r=new Date;r.setTime(r.getTime()+24*s*36e5);let a="expires="+r.toUTCString();document.cookie=`${e}=${encodeURIComponent(String(t))};${a};path=/`})("guest_cart_id",String(r)),t((0,g.addItem)(s))},onError:t=>{e(t?.message||"Merge cart failed!","danger")}});return{mergeCart:async(e,t)=>{await s({token:e,cartId:t})},isLoading:r,error:a}}(),{register:N,handleSubmit:E,formState:{errors:T,isSubmitting:O}}=(0,o.useForm)({mode:"onSubmit",reValidateMode:"onChange"}),M=async t=>{try{let s=(0,f.getCookie)(u.GUEST_CART_ID),a=(0,f.getCookie)(u.GUEST_CART_TOKEN),i=await (0,r.signIn)("credentials",{redirect:!1,...t,callbackUrl:"/"});if(!i?.ok)return void j(i?.error||"Invalid login credentials.","warning");j("Welcome! Successfully logged in.","success"),(0,y.setLocalStorage)("email",t?.username);let n=await (0,r.getSession)(),o=n?.user?.accessToken;if(o||console.warn("No API token available in session after login"),n?.user&&w((0,b.setUser)(n.user)),o&&s&&a)try{await S(o,parseInt(s,10)),(0,x.setCookie)(u.GUEST_CART_TOKEN,o),(0,x.setCookie)(u.IS_GUEST,"false"),await C()}catch(e){console.error("mergeCart failed:",e)}else o&&((0,x.setCookie)(u.GUEST_CART_TOKEN,o),(0,x.setCookie)(u.IS_GUEST,"false"));setTimeout(()=>{e.push("/"),e.refresh()},100)}catch(e){console.error(e),j("Something went wrong. Please try again.","danger")}};return(0,t.jsxs)("div",{className:"flex h-[80vh] w-full items-center max-w-screen-2xl mx-auto px-4  xss:px-7.5 justify-between gap-4 lg:my-16 xl:my-28",children:[(0,t.jsxs)("div",{className:"flex w-full max-w-[583px] flex-col gap-y-4 lg:gap-y-12",children:[(0,t.jsxs)("div",{className:"font-outfit",children:[(0,t.jsx)("h2",{className:"py-1 text-2xl font-semibold sm:text-4xl",children:"Sign in to your account"}),(0,t.jsx)("p",{className:"mt-2  text-base md:text-lg font-normal text-black/60 dark:text-neutral-400",children:"If you have an account, sign in with your email address."})]}),(0,t.jsxs)("form",{noValidate:!0,className:"flex flex-col gap-y-4 lg:gap-y-12",onSubmit:E(M),children:[(0,t.jsxs)("div",{className:"flex flex-col gap-y-2.5 lg:gap-4",children:[(0,t.jsx)(c.default,{...N("username",{required:"Email is required",pattern:{value:u.EMAIL_REGEX,message:"Please enter a valid email."}}),errorMsg:T.username?.message?[T.username.message]:void 0,label:"Enter Your Email Address",labelPlacement:"outside",name:"username",placeholder:"Enter your email address",rounded:"md",size:"lg",typeName:"email"}),(0,t.jsx)(c.default,{...N("password",{required:"Password is required",minLength:{value:2,message:"Be at least 2 characters long"},validate:e=>!!/[0-2]/.test(e)||"Contain at least one number."}),errorMsg:T.password?.message?[T.password.message]:void 0,label:"Enter Password",labelPlacement:"outside",name:"password",placeholder:"Enter your password",rounded:"md",size:"lg",typeName:"password"}),(0,t.jsx)(i.default,{className:"text-end text-sm font-medium text-blue-600 underline hover:text-blue-500 underline",href:"/customer/forget-password","aria-label":"Go to forgot password page",children:"Forgot your password ?"})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2 lg:gap-y-3",children:[(0,t.jsx)(l.Button,{className:"cursor-pointer",disabled:O,loading:O,title:"Sign In",type:"submit"}),(0,t.jsxs)("span",{className:"mx-auto font-outfit sm:mx-0",children:["New customer?"," ",(0,t.jsx)(i.default,{className:"font-medium text-blue-600 hover:text-blue-500 underline",href:"/customer/register","aria-label":"Go to create account page",children:"Create your account"})]})]})]})]}),(0,t.jsx)("div",{className:"relative hidden aspect-[0.9] max-h-[692px] w-full max-w-[790px] sm:block md:aspect-[1.14]",children:(0,t.jsx)(a.default,{fill:!0,priority:!0,alt:"Sign In Image",className:(0,s.default)("relative h-full w-full object-fill","transition duration-300 ease-in-out group-hover:scale-105"),sizes:"(min-width: 768px) 66vw, 100vw",src:u.SIGNIN_IMG})})]})}e.s(["default",()=>w],25855)}]);